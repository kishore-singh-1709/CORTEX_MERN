(this["webpackJsonpcortex-client"]=this["webpackJsonpcortex-client"]||[]).push([[0],{111:function(e,t,a){e.exports=a(168)},116:function(e,t,a){},165:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=(a(116),a(19)),l=a(49),i=a(216),u=a(91),m=a(213),p=a(6),d=a.n(p),f=a(11),g=a(217),h=a(207),b=a(202),v=a(203),E=a(211),k=a(206),y=a(64),S=a.n(y),w=a(94),O=a(205);function C(){return r.a.createElement(w.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(b.a,{color:"inherit",href:"https://material-ui.com/"},"Cortex")," ",(new Date).getFullYear(),".")}var j=a(215),x=a(13),N=a.n(x);function T(e){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/users/",A(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/signin/",A(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return{name:e.name,email:e.email,password:e.password,isAdmin:e.isAdmin}}var F=a(16),D=a(210),H=function(e){var t=e.onChange,a=e.name,n=e.label,c=e.type,s=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:a,label:n,id:a,type:c,autoComplete:"password"===a?"current-password":"email",onChange:t}),s&&r.a.createElement("div",{className:"alert alert-danger"},s))},R=a(204),B=function(e){var t=e.label,a=e.onClick,n=e.className;return r.a.createElement(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n,onClick:a},t)};function L(){var e=q();try{return Object(l.a)(e)}catch(t){console.log("getLoginJwt",t)}}function U(){try{return L().name}catch(e){console.log("app",e)}}function z(){try{return L().isAdmin}catch(e){console.log("app",e)}}function q(){return localStorage.getItem("accessToken")}var M=Object(O.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://i1.wp.com/noahkaydesign.com/wp-content/uploads/2020/04/Asset-5@2x.png?fit=2000%2C2000&ssl=1)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Q(e){var t=M(),a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),m=u[0],p=u[1],y=r.a.useState(!1),O=Object(o.a)(y,2),x=O[0],N=O[1],T=r.a.useState("User not found! Please check your credentials!"),I=Object(o.a)(T,2),P=I[0],A=I[1];Object(n.useEffect)((function(){U()&&(window.location="/not-found")}),[]);var D=Object(n.useCallback)((function(e){l(e.target.value)}),[]),R=Object(n.useCallback)((function(e){p(e.target.value)}),[]),L=function(){var t=Object(f.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,_({email:s,password:m}).then((function(t){return localStorage.setItem("accessToken",t.data.accessToken),e.history.replace("/tickets"),window.location="/tickets",t})).catch((function(e){e.response&&400===e.response.status&&(A(e.response.data),N(!0))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=Object(n.useCallback)(L,[s,m]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{container:!0,component:"main",className:t.root},r.a.createElement(h.a,null),r.a.createElement(k.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(k.a,{item:!0,xs:12,sm:8,md:5,component:v.a,elevation:6,square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(g.a,{className:t.avatar},r.a.createElement(S.a,null)),r.a.createElement(w.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(H,{onChange:D,type:"email",name:"email",label:"Email Address"}),r.a.createElement(H,{onChange:R,type:"password",name:"password",label:"password"}),r.a.createElement(B,{label:"Sign In",onClick:z,className:t.submit}),r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0},r.a.createElement(b.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(E.a,{mt:5},r.a.createElement(C,null)))),r.a.createElement(j.a,{open:x,autoHideDuration:3e3,onClose:function(){N(!1)},message:P}))),r.a.createElement(F.a,{position:"bottom-center",autoClose:2e3}))}var J=a(208),G=a(212),V=Object(O.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://i1.wp.com/noahkaydesign.com/wp-content/uploads/2020/04/Asset-5@2x.png?fit=2000%2C2000&ssl=1)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function W(e){var t=V(),a=Object(n.useState)(String),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(String),u=Object(o.a)(i,2),m=u[0],p=u[1],y=Object(n.useState)(String),O=Object(o.a)(y,2),x=O[0],N=O[1],I=Object(n.useState)(!1),_=Object(o.a)(I,2),P=_[0],A=_[1],D=r.a.useState(!1),R=Object(o.a)(D,2),L=R[0],z=R[1],q=r.a.useState("Please Try Again"),M=Object(o.a)(q,2),Q=M[0],W=M[1];Object(n.useEffect)((function(){U()&&(window.location="/not-found")}),[]);var X=Object(n.useCallback)((function(e){l(e.target.value)}),[]),K=Object(n.useCallback)((function(e){A(e.target.checked)}),[]),Y=Object(n.useCallback)((function(e){p(e.target.value)}),[]),Z=Object(n.useCallback)((function(e){N(e.target.value)}),[]),$=function(){var t=Object(f.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={name:s,email:m,password:x,isAdmin:P},t.next=4,T(n).then((function(t){return console.log("signup",t.header),localStorage.setItem("accessToken",t.data.accessToken),e.history.replace("/tickets"),window.location="/tickets",t})).catch((function(e){e.response&&400===e.response.status&&(W(e.response.data),z(!0))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=Object(n.useCallback)($,[s,m,x,P]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{container:!0,component:"main",className:t.root},r.a.createElement(h.a,null),r.a.createElement(k.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(k.a,{item:!0,xs:12,sm:8,md:5,component:v.a,elevation:6,square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(g.a,{className:t.avatar},r.a.createElement(S.a,null)),r.a.createElement(w.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(k.a,{container:!0,spacing:2},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(H,{onChange:X,type:"text",name:"firstName",label:"First Name"})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(H,{onChange:Y,type:"email",name:"email",label:"Email Address"})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(H,{onChange:Z,type:"password",name:"password",label:"password"})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(J.a,{control:r.a.createElement(G.a,{value:"allowExtraEmails",color:"primary",onChange:K}),label:"Register Me as an Admin User"}))),r.a.createElement(B,{label:"Sign Up",onClick:ee,className:t.submit}),r.a.createElement(k.a,{container:!0,justify:"flex-end"},r.a.createElement(k.a,{item:!0},r.a.createElement(b.a,{href:"/signin",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(j.a,{open:L,autoHideDuration:3e3,onClose:function(){z(!1)},message:Q}),r.a.createElement(E.a,{mt:5},r.a.createElement(C,null)))),r.a.createElement(F.a,{position:"bottom-center",autoClose:2e3}))}var X=a(88),K=a.n(X),Y=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:K.a,alt:"Responsive image",width:"100%",height:"500",className:"bg"}))},Z=a(209),$=a(69),ee=function(e){var t=e.user;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2"},r.a.createElement("ul",{className:"navbar-nav mr-auto"}," ")),r.a.createElement("div",{className:"mx-auto order-0"},r.a.createElement($.a,{className:"navbar-brand",to:"#"},"CORTEX+")),r.a.createElement("div",{className:"navbar-collapse collapse w-100 order-3 dual-collapse2"},r.a.createElement("ul",{className:"navbar-nav ml-auto"}),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"badge badge-secondary"},r.a.createElement("h6",null,t)),r.a.createElement(Z.a,{className:"nav-item nav-link",to:"/signout"},"Signout")):""))},te=function(e){return Object(n.useEffect)((function(){localStorage.removeItem("accessToken"),e.history.replace("/signin"),window.location="/signin"}),[]),null},ae=a(47),ne=a(26),re=a(31),ce=a(29),se=a(27),oe=(a(141),a(32)),le=a.n(oe);function ie(e){var t=e.action,a=e.msg;switch(t){case"info":F.b.info(a);break;case"warn":F.b.warn(a);break;case"error":F.b.error(a);break;case"success":F.b.success(a);break;case"dark":F.b.dark(a);break;default:F.b.info(a)}}var ue=function(e){var t=e.itemsCount,a=e.pageSize,n=e.onPageChange,c=e.currentPage,s=t/a;return s>1?r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},le.a.range(1,s+1).map((function(e){return r.a.createElement("li",{key:e,style:{cursor:"pointer"},className:c===e?"page-item active":"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(){return n(e)}},e))})))):""};N.a.defaults.baseURL="http://localhost:3901/api";N.a.defaults.headers.common["x-auth"]=q();var me=0;function pe(){return de.apply(this,arguments)}function de(){return(de=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.a.all([N.a.get("/tickets/"),N.a.get("/status/")]).then(N.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t[0].data,r=t[1].data;return console.log("axios_all_m",n),console.log("axios_all_g",r),{ticketList:n,statusList:r}}))).catch((function(e){console.log("axios_all",e),Se(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat("/tickets/").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function he(e){return be.apply(this,arguments)}function be(){return(be=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/tickets/",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._id,delete t._id,e.next=4,N.a.put("".concat("/tickets/").concat(a),t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat("/tickets/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){var t;if(e.response&&e.response.status){switch(e.response.status){case 400:if("Invalid Token"!==e.response.data)break;case 401:t="Please Login";break;case 403:t="Only Admin has privelege to do this action";break;case 404:t="HTTP Route wrong";break;default:return e.response.data}ie({action:"error",msg:t})}}function we(e){return{_id:e._id,title:e.title,statusId:e.status._id,description:e.description,progress:e.progress,assignee:e.assignee,userId:e.user._id}}function Oe(e,t,a){var n=(t-1)*a;return le()(e).slice(n).take(a).value()}N.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||0!==me||(console.log("interceptor",e),me++,ie({action:"error",msg:"UNEXPECTED ERROR OCCURED..."})),Promise.reject(e)}));var Ce=function(e){var t=e.type,a=e.name,n=e.label,c=e.value,s=e.placeholder,o=e.error,l=e.onChange;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:a},n),r.a.createElement("input",{type:t,name:a,value:c,placeholder:s,onChange:l,id:a,className:"form-control"}),o&&r.a.createElement("div",{className:"alert alert-danger"},o))},je=function(e){var t=e.value,a=e.onChange;return r.a.createElement(Ce,{type:"text",name:"query",className:"form-control my-3",placeholder:"search...",value:t,onChange:function(e){return a(e.target.value)}})};function xe(e,t){return"list-group-item"+(e&&e.name===t||"all"===t?" active":"")}var Ne=function(e){var t=e.status,a=e.onStatusSelect,n=e.selectedStatus;return r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement("li",{key:e._id,style:{cursor:"pointer"},className:xe(n,e.name),onClick:function(){return a(e)}},e.name)})))},Te=a(92),Ie=function(e){Object(ce.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).raiseSort=function(t){var a=Object(ae.a)(e.props.tableHeaders).filter((function(e){return e.column===t.column}))[0];a.order="asc"===a.order?"desc":"asc",e.props.onSort(a)},e.renderSortIcon=function(t){var a=e.props.sortColumn;if(t.column!==a.column)return null;var n="fa fa-sort";return n+="asc"===a.order?"-desc":"-asc",r.a.createElement("i",{className:n,"aria-hidden":"true"})},e}return Object(re.a)(a,[{key:"render",value:function(){var e=this,t=this.props.tableHeaders;return r.a.createElement("thead",null,r.a.createElement("tr",null," ",t.map((function(t){return r.a.createElement("th",{style:{cursor:"pointer"},key:t.column,onClick:function(){return e.raiseSort(t)}},t.name," ",e.renderSortIcon(t))}))))}}]),a}(n.Component),_e=function(e,t){return e._id+t.column},Pe=function(e){var t=e.tableHeaders,a=e.data;return r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e._id},t.map((function(t){return r.a.createElement("td",{key:_e(e,t)},function(e,t){return t.content?t.content(e):le.a.get(e,t.column)}(e,t))})))})))},Ae=function(e){var t=e.tableHeaders,a=e.data,n=e.sortColumn,c=e.onSort,s=e.onLike,o=e.onDelete;return r.a.createElement(Te.a,{striped:!0,bordered:!0,hover:!0,variant:"light",borderless:"true"},r.a.createElement(Ie,{tableHeaders:t,sortColumn:n,onSort:c}),r.a.createElement(Pe,{tableHeaders:t,data:a,onLike:s,onDelete:o}))},Fe=function(e){var t=e.onDelete,a=e.tickets,n=e.onSort,c=e.tableHeaders,s=e.sortColumn;return r.a.createElement(Ae,{tableHeaders:c,sortColumn:s,onSort:n,data:a,onDelete:t})},De=function(e){var t=e.progress;return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{name:"progressBar",className:"progress-bar",role:"progressbar",style:{width:t}},t))},He=(a(163),function(e){Object(ce.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={tickets:[],status:[],pageSize:4,currentPage:1,totalTickets:0,selectedStatus:null,sortColumn:{},searchQuery:"",tableHeaders:[{column:"title",name:"TITLE",order:"asc",content:function(e){return r.a.createElement($.a,{to:"/ticket/".concat(e._id)},e.title)}},{column:"description",name:"DESCRIPTION",order:"asc"},{column:"assignee",name:"ASSIGNEE",order:"asc"},{column:"status.name",name:"STATUS",order:"asc"},{column:"progress",name:"PROGRESS",order:"asc",content:function(e){return r.a.createElement(De,{progress:e.progress})}}]},e.handleSearch=function(t){e.setState({searchQuery:t,selectedStatus:null,currentPage:1})},e.handleStatusFilter=function(t){return e.setState({selectedStatus:t,searchQuery:"",currentPage:1})},e.getPageData=function(e){var t=e.tickets,a=e.selectedStatus,n=e.sortColumn,r=e.currentPage,c=e.pageSize,s=e.searchQuery,o=a&&a._id?t.filter((function(e){return e.status._id===a._id})):t;s?o=t.filter((function(e){return e.title.toLowerCase().includes(s.toLowerCase())})):a&&a._id&&(o=t.filter((function(e){return e.status._id===a._id})));var l=le.a.sortBy(o,[n.column],[n.order]);return{ticketsFiltered:Oe(Object(ae.a)(l),r,c),itemsCount:o.length}},e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleDelete=function(t){var a=e.state.tickets.filter((function(e){return e._id!==t}));e.setState({tickets:a}),ke(t),ie({action:"delete"})},e.handleHeaderSort=function(t){e.setState({sortColumn:t})},e}return Object(re.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n,c,s,o,l,i,u,m,p=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U()||(window.location="/not-found"),t={_id:"",name:"All"},a={column:"title",name:"Title",order:"asc"},e.next=5,pe();case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:c=n.statusList,s=n.ticketList,o=[t].concat(Object(ae.a)(c)),l=Object(ae.a)(this.state.tableHeaders),i=this.props,u=i.user,m=i.isAdmin,u&&m&&l.push({column:"delete",content:function(e){return r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return p.handleDelete(e._id)}},"Delete")}}),this.setState({tickets:s,status:o,selectedStatus:t,totalTickets:s.length,tableHeaders:l,sortColumn:a});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.currentPage,a=e.pageSize,n=e.status,c=e.selectedStatus,s=e.sortColumn,o=e.tableHeaders,l=e.searchQuery,i=this.getPageData(this.state),u=i.ticketsFiltered,m=i.itemsCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"s-2"},this.props.isAdmin&&r.a.createElement($.a,{to:"/status/new",className:"btn btn-primary",style:{marginBottom:20}},"Create Status"),r.a.createElement(Ne,{selectedStatus:c,status:n,onStatusSelect:this.handleStatusFilter})),r.a.createElement("div",{className:"col"},r.a.createElement($.a,{to:"/ticket/new",className:"btn btn-primary",style:{marginBottom:20}},"Create Ticket"),r.a.createElement(je,{value:l,onChange:this.handleSearch}),"Ticket Count: \xa0",r.a.createElement("span",{class:"badge badge-light"},m),r.a.createElement(Fe,{onDelete:this.handleDelete,tickets:u,onSort:this.handleHeaderSort,sortColumn:s,tableHeaders:o}),r.a.createElement(ue,{itemsCount:m,pageSize:a,currentPage:t,onPageChange:this.handlePageChange})))),r.a.createElement(F.a,{position:"bottom-center",autoClose:2e3}))}}]),a}(n.Component)),Re=a(46),Be=a(90),Le=a(54),Ue=a(22),ze=a.n(Ue),qe=a(93),Me=function(e){var t=e.name,a=e.label,n=e.options,c=e.error,s=Object(qe.a)(e,["name","label","options","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("select",Object.assign({id:t},s,{name:t,className:"form-control"}),r.a.createElement("option",{value:""}),n.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),c&&r.a.createElement("div",{className:"alert alert-danger"},c))},Qe=function(e){Object(ce.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={data:{},errors:{}},e.handleChange=function(t){var a=t.target,n=Object(Re.a)({},e.state.errors);n[a.name]=e.validateProperty(a);var r=Object(Re.a)({},e.state.data);r[a.name]=a.value,e.setState({data:r,errors:n})},e.validateProperty=function(t){var a=t.name,n=t.value,r=Object(Le.a)({},a,n);if(e.schema[a]){var c=Object(Le.a)({},a,e.schema[a]),s=ze.a.validate(r,c).error;return s?s.details[0].message:null}},e.validate=function(){var t={},a=ze.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(a){var n,r=Object(Be.a)(a.details);try{for(r.s();!(n=r.n()).done;){var c=n.value;console.log("".concat(c.path," : ").concat(c.message)),t[c.path]=c.message}}catch(s){r.e(s)}finally{r.f()}}return 0===Object.keys(t).length?null:t},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();e.setState({errors:a||{}}),e.doSubmit()},e.renderFormButton=function(e){return r.a.createElement("button",{type:"submit",className:"btn btn-primary"},e)},e.renderInput=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",c=e.state,s=c.data,o=c.errors;return r.a.createElement(Ce,{type:n,name:t,label:a,value:s[t],error:o[t],onChange:e.handleChange})},e.renderSelect=function(t,a,n){var c=e.state,s=c.data,o=c.errors;return r.a.createElement(Me,{name:t,value:s[t],label:a,options:n,onChange:e.handleChange,error:o[t]})},e}return a}(n.Component);function Je(){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("/status/");case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ve(e){return We.apply(this,arguments)}function We(){return(We=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/status/",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._id,delete t._id,e.next=4,N.a.put("".concat("/status/").concat(a),t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=function(e){var t=e.progress,a=e.onChange,n=t.slice(0,-1);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"myRange"},"Progress"),r.a.createElement("div",{className:"slidecontainer"},r.a.createElement("input",{type:"range",min:"0",max:"100",step:"10",value:n,className:"slider",id:"myRange",onChange:function(e){return a(e)}}),r.a.createElement("span",{className:"btn btn-badge-primary"},t)))},Ze=function(e){Object(ce.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{title:"",description:"",statusId:"",assignee:"",progress:"0%",userId:""},status:[],errors:{}},e.schema={title:ze.a.string().min(5).max(10).required().label("Title"),description:ze.a.string().max(20).label("Description"),assignee:ze.a.string().required().label("Assignee"),statusId:ze.a.string().label("Status"),userId:ze.a.string().label("User"),progress:ze.a.string().label("Progress")},e.handleBack=function(){e.props.history.replace("/tickets"),window.location="/tickets"},e.handleProgressInput=function(t){var a=Object(Re.a)({},e.state.data);a.progress=t.target.value+"%",e.setState({data:a})},e}return Object(re.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n,r,c,s,o,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U()||(window.location="/not-found"),t=this.props,a=t.history,n=t.match,e.next=4,Je();case 4:if(r=e.sent,this.setState({status:r}),!n.url.includes("new")){e.next=12;break}return c=L(),s=c._id,(o=Object(Re.a)({},this.state.data)).userId=s,this.setState({data:o}),e.abrupt("return");case 12:return l=n.params.id,e.next=15,fe(l);case 15:if(i=e.sent){e.next=18;break}return e.abrupt("return",a.replace("/not-found"));case 18:this.setState({data:we(i)});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.data;return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.handleBack()}},"\u2190 Back"),r.a.createElement("h5",null,"TICKET FORM")),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("title","Title"),this.renderInput("assignee","Assignee"),this.renderSelect("statusId","Status",a),r.a.createElement(Ye,{progress:""===n.progress?"0%":n.progress,onChange:this.handleProgressInput}),this.renderInput("description","Description"),this.renderFormButton("Save")),r.a.createElement(F.a,{position:"bottom-center",autoClose:2e3}))}},{key:"doSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Ticket Form-submitted"),t=this.state.data,e.prev=2,t._id){e.next=10;break}return console.log("saveTicket",t),e.next=7,he(t);case 7:a="Added",e.next=13;break;case 10:return e.next=12,ve(t);case 12:a="Updated";case 13:ie({action:"",msg:"".concat(t.title," Ticket ").concat(a)}),setTimeout((function(){n.props.history.replace("/tickets")}),2e3),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.log("saveTicket_exception",e.t0),Se(e.t0);case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()}]),a}(Qe),$e=(a(164),a(165),function(e){Object(ce.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:""},status:[],errors:{}},e.schema={name:ze.a.string().label("Status")},e.handleBack=function(){e.props.history.replace("/tickets"),window.location="/tickets"},e}return Object(re.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z()||(window.location="/not-found"),e.next=3,Je();case 3:t=e.sent,this.setState({status:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.handleBack()}},"\u2190 Back"),r.a.createElement("h5",null,"STATUS FORM")),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("name","Status"),this.renderFormButton("Save")),r.a.createElement(F.a,{position:"bottom-center",autoClose:2e3}))}},{key:"doSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Status Form-submitted"),t=this.state.data,e.prev=2,t._id){e.next=10;break}return console.log("saveTicket",t),e.next=7,Ve(t);case 7:a="Added",e.next=13;break;case 10:return e.next=12,Xe(t);case 12:a="Updated";case 13:ie({action:"",msg:"".concat(t.name," Status ").concat(a)}),setTimeout((function(){n.props.history.replace("/tickets")}),2e3),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.log("saveStatus_exception",e.t0),Se(e.t0);case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()}]),a}(Qe)),et=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),p=Object(o.a)(s,2),d=p[0],f=p[1];return Object(n.useEffect)((function(){try{var e=localStorage.getItem("accessToken"),t=Object(l.a)(e),a=t.name,n=t.isAdmin;c(a),f(n)}catch(r){console.log("app",r)}}),[a,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"container"},r.a.createElement(ee,{user:a}),r.a.createElement("br",null),r.a.createElement("div",{className:"contents"},r.a.createElement(i.a,null,r.a.createElement(u.a,{path:"/signin",component:Q}),r.a.createElement(u.a,{path:"/signup",component:W}),r.a.createElement(u.a,{path:"/signout",component:te}),r.a.createElement(u.a,{path:"/ticket/:id",exact:!0,component:Ze}),r.a.createElement(u.a,{path:"/ticket/new",exact:!0,component:Ze}),r.a.createElement(u.a,{path:"/status/new",exact:!0,component:$e}),r.a.createElement(u.a,{path:"/not-found",component:Y}),r.a.createElement(u.a,{path:"/tickets",exact:!0,component:function(){return r.a.createElement(He,{user:a,isAdmin:d})}}),r.a.createElement(m.a,{from:"/",exact:!0,to:"/signin"}),r.a.createElement(m.a,{to:"/not-found"})))))},tt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,220)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},at=(a(166),a(167),a(214));s.a.render(r.a.createElement(at.a,null,r.a.createElement(et,null)),document.getElementById("root")),tt()},88:function(e,t,a){e.exports=a.p+"static/media/404_img.e4730676.jpg"}},[[111,1,2]]]);
//# sourceMappingURL=main.f176ea41.chunk.js.map